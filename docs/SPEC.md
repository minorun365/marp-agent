# パワポ作るマン for KAG 仕様書

> **注意**: 基本仕様は **mainブランチ** の `docs/SPEC.md` を参照してください。このファイルにはkagブランチ固有の差分のみ記載します。

## kag固有の差分

### 決定事項の差分

| カテゴリ | 項目 | main | kag |
|---------|------|------|-----|
| スライド | テーマ | border | **kag**（KAG専用テーマ） |
| 認証 | スコープ | 誰でもサインアップ可能 | **KAGドメイン限定**（`kddi-agdc.com`） |

---

### テーマ

**kagテーマの特徴**:
- KAG専用のカスタムテーマ
- 環境変数 `MARP_THEME` で切り替え可能（デフォルト: kag）

**フォントサイズ設定**:

| 要素 | サイズ | 太さ |
|------|--------|------|
| h1（タイトルスライド） | 46pt | bold |
| h2（スライドタイトル） | 32pt | bold |
| h3 | 28pt | bold |
| p（本文） | 24pt | - |
| section（ベース） | 22pt | - |
| crosshead h1 | 42pt | - |

**スライドクラスディレクティブ**:

| クラス | 用途 | 使用例 |
|--------|------|--------|
| `top` | タイトルスライド（1枚目）【必須】 | `<!-- _class: top -->` |
| `crosshead` | セクション区切り【推奨】 | `<!-- _class: crosshead -->` |
| `end` | 最後のスライド【必須】 | `<!-- _class: end -->` |
| なし | 通常スライド | クラス指定なし |

> **注**: セクション区切りはシステムプロンプト上では `<!-- _backgroundColor: #303030 -->` 方式も併用されている（mainと同様）。テーマCSS側では `crosshead` クラスでスタイルが定義されている。

**Marpフロントマター**:
```yaml
---
marp: true
theme: kag
size: 16:9
paginate: true
---
```

---

### 認証

- **KAGドメイン限定**（`kddi-agdc.com`）
- Pre Sign-up Lambda トリガーでドメイン検証

**認証画面カスタマイズ**:

| 項目 | 内容 |
|------|------|
| ヘッダー | アプリ名「パワポ作るマン for KAG」+「KAGメルアドで新規アカウントを作れます！」 |
| フッター | 「このアプリはトライアル運用中です。」 |

---

### 配色

| 要素 | 配色 |
|------|------|
| KAGブルー | `#0e0d6a` |
| グラデーション | `#1a3a6e` → `#5ba4d9` |
| テーマカラー（meta） | `#0e0d6a` |

---

---

### 環境変数（kag追加分）

| 変数名 | 説明 |
|--------|------|
| `MARP_THEME` | テーマ名（kagブランチ: kag） |

---

### システムプロンプトの差分

mainとの主な違い:
- `theme: {THEME_NAME}` で動的にテーマが設定される（kagでは `kag`）
- スライド構成ルールがクラスディレクティブ方式（`top`, `crosshead`, `end`）に加え、`backgroundColor` 方式も併用
- テーマCSSでスタイルが定義される（h1: 46pt bold, h2: 32pt bold, h3: 28pt bold, 本文: 24pt）
- `web_search` のフォールバック動作の記述を簡略化
- `情報は簡潔に、キーワード中心で` のルールを追加

**注**: `{THEME_NAME}` は環境変数 `MARP_THEME` から動的に設定される（デフォルト: border、kagブランチ: kag）
